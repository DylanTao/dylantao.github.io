!function(){"use strict";function e(){"performance"in window&&window.addEventListener("load",(function(){const e=performance.getEntriesByType("navigation")[0];g.pageLoadTime=e.loadEventEnd-e.loadEventStart,"undefined"!=typeof gtag&&gtag("event","timing_complete",{name:"page_load",value:Math.round(g.pageLoadTime)})}))}function n(){if("IntersectionObserver"in window){const e=new IntersectionObserver((n=>{n.forEach((n=>{if(n.isIntersecting){const t=n.target;t.src=t.dataset.src,t.classList.remove("lazy"),e.unobserve(t)}}))}));document.querySelectorAll("img[data-src]").forEach((n=>{e.observe(n)}))}}function t(){const e=window.location.pathname;e.includes("/publications/")||e.includes("/projects/")?o():e.includes("/blog/")&&i()}function o(){a({"@context":"https://schema.org","@type":"CreativeWork",name:document.title,description:c(),author:{"@type":"Person",name:"Sirui Tao"},publisher:{"@type":"Person",name:"Sirui Tao"},url:window.location.href,datePublished:(new Date).toISOString().split("T")[0],genre:"Research Publication"})}function i(){a({"@context":"https://schema.org","@type":"BlogPosting",headline:document.title,description:c(),author:{"@type":"Person",name:"Sirui Tao"},publisher:{"@type":"Person",name:"Sirui Tao"},url:window.location.href,datePublished:(new Date).toISOString().split("T")[0],mainEntityOfPage:{"@type":"WebPage","@id":window.location.href}})}function a(e){const n=document.createElement("script");n.type="application/ld+json",n.textContent=JSON.stringify(e),document.head.appendChild(n)}function c(){const e=document.querySelector('meta[name="description"]');return e?e.content:document.title}function r(){let e=0;window.addEventListener("scroll",(function(){const n=window.pageYOffset||document.documentElement.scrollTop,t=document.documentElement.scrollHeight-window.innerHeight,o=Math.round(n/t*100);o>e&&(e=o,e>=25&&e<50?s("25%"):e>=50&&e<75?s("50%"):e>=75&&e<100?s("75%"):e>=100&&s("100%"))}));let n=Date.now();window.addEventListener("beforeunload",(function(){const e=Math.round((Date.now()-n)/1e3);"undefined"!=typeof gtag&&gtag("event","timing_complete",{name:"time_on_page",value:e})}))}function s(e){"undefined"!=typeof gtag&&gtag("event","scroll_depth",{event_category:"engagement",event_label:e,value:e})}function d(){const e=document.querySelector("#search-input");e&&(e.addEventListener("input",(function(e){const n=e.target.value;n.length>2&&l(n)})),e.addEventListener("keypress",(function(e){"Enter"===e.key&&u(e.target.value)})))}function l(){}function u(e){"undefined"!=typeof gtag&&gtag("event","search",{search_term:e})}function m(){document.querySelector(".social-share")||p()}function p(){const e=document.createElement("div");e.className="social-share mt-3",e.innerHTML=`\n            <h6>Share this page:</h6>\n            <a href="https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(document.title)}" \n               target="_blank" class="btn btn-sm btn-outline-primary me-2">\n               <i class="fab fa-twitter"></i> Twitter\n            </a>\n            <a href="https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}" \n               target="_blank" class="btn btn-sm btn-outline-primary me-2">\n               <i class="fab fa-linkedin"></i> LinkedIn\n            </a>\n            <a href="mailto:?subject=${encodeURIComponent(document.title)}&body=${encodeURIComponent(window.location.href)}" \n               class="btn btn-sm btn-outline-primary">\n               <i class="fas fa-envelope"></i> Email\n            </a>\n        `;const n=document.querySelector("main")||document.querySelector(".container");n&&n.appendChild(e)}function f(){e(),n(),t(),r(),d(),m()}const g={pageLoadTime:0,userEngagement:0,scrollDepth:0};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",f):f(),window.seoOptimization={metrics:g,init:f}}();