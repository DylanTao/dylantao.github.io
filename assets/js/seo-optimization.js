!function(){"use strict";function e(){"performance"in window&&window.addEventListener("load",(function(){const e=performance.getEntriesByType("navigation")[0];p.pageLoadTime=e.loadEventEnd-e.loadEventStart,"undefined"!=typeof gtag&&gtag("event","timing_complete",{name:"page_load",value:Math.round(p.pageLoadTime)})}))}function t(){if("IntersectionObserver"in window){const e=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const n=t.target;n.src=n.dataset.src,n.classList.remove("lazy"),e.unobserve(n)}}))}));document.querySelectorAll("img[data-src]").forEach((t=>{e.observe(t)}))}}function n(){const e=window.location.pathname;e.includes("/publications/")||e.includes("/projects/")?o():e.includes("/blog/")&&i()}function o(){a({"@context":"https://schema.org","@type":"CreativeWork",name:document.title,description:c(),author:{"@type":"Person",name:"Sirui Tao"},publisher:{"@type":"Person",name:"Sirui Tao"},url:window.location.href,datePublished:(new Date).toISOString().split("T")[0],genre:"Research Publication"})}function i(){a({"@context":"https://schema.org","@type":"BlogPosting",headline:document.title,description:c(),author:{"@type":"Person",name:"Sirui Tao"},publisher:{"@type":"Person",name:"Sirui Tao"},url:window.location.href,datePublished:(new Date).toISOString().split("T")[0],mainEntityOfPage:{"@type":"WebPage","@id":window.location.href}})}function a(e){const t=document.createElement("script");t.type="application/ld+json",t.textContent=JSON.stringify(e),document.head.appendChild(t)}function c(){const e=document.querySelector('meta[name="description"]');return e?e.content:document.title}function r(){let e=0;window.addEventListener("scroll",(function(){const t=window.pageYOffset||document.documentElement.scrollTop,n=document.documentElement.scrollHeight-window.innerHeight,o=Math.round(t/n*100);o>e&&(e=o,e>=25&&e<50?d("25%"):e>=50&&e<75?d("50%"):e>=75&&e<100?d("75%"):e>=100&&d("100%"))}));let t=Date.now();window.addEventListener("beforeunload",(function(){const e=Math.round((Date.now()-t)/1e3);"undefined"!=typeof gtag&&gtag("event","timing_complete",{name:"time_on_page",value:e})}))}function d(e){"undefined"!=typeof gtag&&gtag("event","scroll_depth",{event_category:"engagement",event_label:e,value:e})}function s(){const e=document.querySelector("#search-input");e&&(e.addEventListener("input",(function(e){const t=e.target.value;t.length>2&&u(t)})),e.addEventListener("keypress",(function(e){"Enter"===e.key&&l(e.target.value)})))}function u(){}function l(e){"undefined"!=typeof gtag&&gtag("event","search",{search_term:e})}function g(){}function m(){e(),t(),n(),r(),s(),g()}const p={pageLoadTime:0,userEngagement:0,scrollDepth:0};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m(),window.seoOptimization={metrics:p,init:m}}();