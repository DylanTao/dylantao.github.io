{% if site.enable_google_verification or site.enable_bing_verification %}
  <!-- Website verification -->
  {% if site.enable_google_verification %}
    <meta name="google-site-verification" content="{{ site.google_site_verification }}">
  {% endif %}
  {% if site.enable_bing_verification %}
    <meta name="msvalidate.01" content="{{ site.bing_site_verification }}">
  {% endif %}
  <!--
    Avoid warning on Google Chrome Error with Permissions-Policy header:
    Origin trial controlled feature not enabled: 'interest-cohort'.
    see https://stackoverflow.com/a/75119417
  -->
  <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
{% endif %}

{% capture author_name %}{{ site.first_name }}{% if site.middle_name %} {{ site.middle_name }}{% endif %} {{ site.last_name }}{% endcapture %}

<!-- Standard metadata -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- Enhanced SEO Meta Tags -->
<meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
<meta name="copyright" content="{{ author_name }}">
<meta name="language" content="{{ site.lang }}">

<!-- Canonical URL -->
<link rel="canonical" href="{{ page.url | prepend: site.baseurl | prepend: site.url | remove_first: 'index.html' }}">

<!-- Additional SEO Meta Tags -->
<meta name="geo.region" content="US-CA">
<meta name="geo.placename" content="San Diego">
<meta name="geo.position" content="32.7157;-117.1611">
<meta name="ICBM" content="32.7157, -117.1611">
<title>
  {% if site.title == 'blank' %}
    {% capture title %}{{ author_name }}{% endcapture %}
  {% else %}
    {% capture title %}{{ site.title }}{% endcapture %}
  {% endif %}
  {% if page.url == '/blog/index.html' %}
    {{ page.title }} | {{ title }}
  {% elsif page.title != 'blank' and page.url != '/' %}
    {% if page.title == null or page.title == '' %}
      {{ page.date | date: '%Y' }} | {{ title }}
    {% else %}
      {{ page.title }} | {{ title }}
    {% endif %}
  {% else %}
    {{ title }}
  {% endif %}
</title>
<meta name="author" content="{{ author_name }}">
<meta name="description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
{% if page.keywords or site.keywords %}
  <meta name="keywords" content="{% if page.keywords %}{{ page.keywords }}{% else %}{{ site.keywords }}{% endif %}">
{% endif %}

{% assign is_blog_post = false %}
{% if page.url != '/blog/index.html' and page.url contains '/blog/' %}
  {% unless page.url contains '/tag/' or page.url contains '/category/' %}
    {% assign is_blog_post = true %}
  {% endunless %}
{% endif %}

{% if site.serve_og_meta %}
  <!-- OpenGraph -->
  <meta property="og:site_name" content="{{ title }}">
  <meta property="og:type" content="{% if is_blog_post %}article{% else %}website{% endif %}">
  <meta property="og:title" content="{% if page.title %}{{ title }} | {{ page.title }}{% else %}{{ title }}{% endif %}">
  <meta property="og:url" content="{{ page.url | prepend: site.baseurl | prepend: site.url | remove_first: 'index.html' }}">
  <meta property="og:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  {% if page.og_image or site.og_image %}
    <meta property="og:image" content="{% if page.og_image %}{{ page.og_image }}{% else %}{{ site.og_image }}{% endif %}">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="{% if page.title %}{{ page.title }}{% else %}{{ title }}{% endif %}">
  {% endif %}
  <meta property="og:locale" content="{{ site.lang }}">
  <meta property="og:locale:alternate" content="en_US">

  <!-- Twitter card -->
  <meta name="twitter:card" content="summary_large_image">
  {% if page.og_image or site.og_image %}
    <meta name="twitter:image:alt" content="{% if page.title %}{{ page.title }}{% else %}{{ title }}{% endif %}">
  {% endif %}
  <meta name="twitter:title" content="{% if page.title %}{{ page.title }}{% else %}{{ title }}{% endif %}">
  <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
  {% if page.og_image or site.og_image %}
    <meta name="twitter:image" content="{% if page.og_image %}{{ page.og_image }}{% else %}{{ site.og_image }}{% endif %}">
  {% endif %}
  {% if site.x_username %}
    <meta name="twitter:site" content="@{{ site.x_username }}">
    <meta name="twitter:creator" content="@{{ site.x_username }}">
  {% endif %}
{% endif %}

{% if site.serve_schema_org %}
  <!-- Schema.org -->
  {% comment %} Social links generator for "sameAs schema" {% endcomment %}
  {% assign sameaslinks = '' | split: ',' %}
  {% for social in site.data.socials %}
    {% case social[0] %}
      {% when 'acm_id' %}
        {% capture link %}https://dl.acm.org/profile/{{ social[1] }}/{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'blogger_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'bluesky_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'dblp_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'discord_id' %}
        {% capture link %}https://discord.com/users/{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'email' %}
        {% capture link %}mailto:{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'facebook_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'github_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'google_scholar_id' %}
        {% capture link %}https://scholar.google.com/citations?user={{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'instagram_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'linkedin_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'mastodon_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'medium_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'orcid_id' %}
        {% capture link %}https://orcid.org/{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'pinterest_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'reddit_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'researchgate_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'semantic_scholar_id' %}
        {% capture link %}https://www.semanticscholar.org/author/{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'snapchat_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'stackoverflow_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'tiktok_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'tumblr_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'twitch_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'twitter_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'x_username' %}
        {% capture link %}https://x.com/{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'youtube_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
      {% when 'zhihu_url' %}
        {% capture link %}{{ social[1] }}{% endcapture %}
        {% assign sameaslinks = sameaslinks | push: link %}
    {% endcase %}
  {% endfor %}

  <!-- Enhanced Schema.org for Academic Profile -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "{{ author_name }}",
    "givenName": "{{ site.first_name }}",
    "familyName": "{{ site.last_name }}",
    "email": "{{ site.email }}",
    "jobTitle": "HCI Researcher & Graphics Enthusiast",
    "worksFor": {
      "@type": "Organization",
      "name": "University of California, San Diego",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "San Diego",
        "addressRegion": "CA",
        "addressCountry": "US"
      }
    },
    "alumniOf": {
      "@type": "Organization",
      "name": "University of California, San Diego"
    },
    "knowsAbout": [
      "Human-Computer Interaction",
      "Computer Graphics",
      "Generative AI",
      "Computational Design",
      "UX Research",
      "Embodied Robotics"
    ],
    "sameAs": {{ sameaslinks | jsonify }},
    "url": "{{ site.url }}{{ site.baseurl }}",
    "image": "{{ site.url }}{{ site.baseurl }}/assets/img/{{ site.icon }}",
    "description": "{{ site.description }}"
  }
  </script>

  <!-- Schema.org for Website -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{{ title }}",
    "url": "{{ site.url }}{{ site.baseurl }}",
    "description": "{{ site.description }}",
    "author": {
      "@type": "Person",
      "name": "{{ author_name }}"
    },
    "publisher": {
      "@type": "Person",
      "name": "{{ author_name }}"
    },
    "potentialAction": {
      "@type": "SearchAction",
      "target": "{{ site.url }}{{ site.baseurl }}/search?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>

  <!-- Schema.org for Research Publications -->
  {% if page.url contains '/publications/' or page.url contains '/projects/' %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CreativeWork",
    "name": "{% if page.title %}{{ page.title }}{% else %}{{ title }}{% endif %}",
    "description": "{{ page_description | strip_newlines | strip }}",
    "author": {
      "@type": "Person",
      "name": "{{ author_name }}"
    },
    "publisher": {
      "@type": "Person",
      "name": "{{ author_name }}"
    },
    "url": "{{ page.url | prepend: site.baseurl | prepend: site.url | remove_first: 'index.html' }}",
    "datePublished": "{% if page.date %}{{ page.date | date: '%Y-%m-%d' }}{% else %}2025{% endif %}",
    "genre": "Research Publication",
    "keywords": "{% if page.keywords %}{{ page.keywords }}{% else %}{{ site.keywords }}{% endif %}"
  }
  </script>
  {% endif %}

  <!-- Schema.org for Blog Posts -->
  {% if is_blog_post %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": "{% if page.title %}{{ page.title }}{% else %}{{ title }}{% endif %}",
    "description": "{{ page_description | strip_newlines | strip }}",
    "author": {
      "@type": "Person",
      "name": "{{ author_name }}"
    },
    "publisher": {
      "@type": "Person",
      "name": "{{ author_name }}"
    },
    "url": "{{ page.url | prepend: site.baseurl | prepend: site.url | remove_first: 'index.html' }}",
    "datePublished": "{% if page.date %}{{ page.date | date: '%Y-%m-%d' }}{% else %}2025{% endif %}",
    "dateModified": "{% if page.last_modified_at %}{{ page.last_modified_at | date: '%Y-%m-%d' }}{% else %}{{ page.date | date: '%Y-%m-%d' }}{% endif %}",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "{{ page.url | prepend: site.baseurl | prepend: site.url | remove_first: 'index.html' }}"
    },
    "articleSection": "{% if page.categories %}{{ page.categories | first }}{% else %}Research{% endif %}",
    "keywords": "{% if page.keywords %}{{ page.keywords }}{% else %}{{ site.keywords }}{% endif %}"
  }
  </script>
  {% endif %}
{% endif %}
